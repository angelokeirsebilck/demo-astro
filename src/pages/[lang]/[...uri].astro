---
import DefaultLayout from '@layouts/DefaultLayout.astro';
import { useGraphqlQuery } from '@composables/useGraphqlQuery'
import {entryQuery} from '@graphql/entry.gql.js'


const { searchParams } = Astro.url

const { lang, uri } = Astro.params;

console.log(Astro.params)

const parsedUri = uri ? uri : '__home__';

const { data: { entry} } = await useGraphqlQuery({
	query: entryQuery,
	routeQuery: Object.fromEntries(searchParams),
	variables: {
        siteId: lang == 'nl' ? 1 : 2,
		uri: parsedUri.toString()
	}
})

if (!entry) {
return new Response(null, {
    status: 404,
    statusText: 'Not found'
});
}



---

<h1>{entry.title}</h1>